# task4
Задание курса #4. "Пиццерия"

Создать сайт (SPA) для локальной пиццерии (как пример, https://dominos.ua/ru/kyiv/), любого другого фудсервис-провайдера, магазина спортоборудования (лонгборды, серфборды, скейтборды ...), магазина мобильных устройств, других товаров.

## **Структура сайта:**

- **Главная страница:** главное меню/навигационный блок (+значок корзины, отображающий актуальное количество товаров, и *опционально* - общую стоимость), блок акций (можно просто блок сбоку с текстами/картинками, но без слайдера), блок рекомендованных/хит товаров, футер.
- **Страница каталога**  всех продуктов, разбитых по подкатегориям (см. Главную страницу Dominos) (min количество продуктов всего на сайте - 16)
- **Страница продуктов** определенной **категории** (min количество категорий - 3)
- Детальная **страница продукта** (Название, описание, маркетинговые тексты, дополнительные изображения продукта, связанные товары, и т.д.)
- Детальная **страница акции**
- **Страница корзины**
- **Страница оформления заказа** (форма ввода данных пользователя - с html5 валидацией) + **страница со статусом заказа**.

## Требования.

Использовать **fetch** и запросы к API.

Использовать **bootstrap** либо другой html/сss фреймворк - МОЖНО.

**Дизайн приложения** будет оцениваться - и в плане его простоты/сложности (ориентируйтесь, пожалуйста, в этом аспекте на ***современные*** платформы, но в рамках наших задач), так и поддержки разных устройств/экранов/браузеров, и наличие багов/артефактов.

Реализовать **роутинг** с помощью ~~html5~~(скорее будет удобнее через window.location.hash) (via #, **без перезагрузок страницы**). Также должна быть возможность переходить на конкретную страницу приложения по прямой ссылке. Пример списка **роутов**:

`/` - главная страница

`/#catalog` - страница каталога

`/#catalog/[url]` - страница продуктов категории (url - `vegeterian`, ..)

`/#product/[url]` - страница продукта

`/#action/[url]` - страница акции

`/#сart` - страница корзины

`/#order` - страница оформления заказа (должна быть закрыта при пустой корзине → **переадресация** в каталог)

`/#order/[id]` - страница оформленного заказа (с информацией о заказе, данными пользователя) (ссылка также недоступна после обновления страницы, поскольку данные о заказе мы сейчас нигде не храним кроме как текущей памяти. Соответственно при попытке перехода → также **переадресовываем** пользователя в каталог)

При вводе недействительного/несуществующего хэша → **переадресация** на главную страницу сайта.
**Переадресацию** делать также БЕЗ перезагрузки страницы.
Ваш код должен быть структурирован и разбит на **модули** (IIFE/ES6) (с функциями/методами), либо классы/сервисы.
**db.json** ([https://my-json-server.typicode.com/](https://my-json-server.typicode.com/) - раздел **How to**)- весь контент сайта хранить в этом файле. С целью в дальнейшем фетчить их через API. Данные хранятся представленые в виде массивов и объектов. Пример структуры файла (можно использовать свою собственную):

```json
{
  "products": [{
    "url": "pizza_mozzarella",
    "productName": "Pizza Mozzarella",
    "productDescription": "About Pizza ... ",
    "price": 155.05,
    "images": ["path/to/cdn.jpg", "relative/path/to/img.jpg", ...],
    "weight": 250,
    "relatedProductIds": [7,12,98],
    "spicy": false,
    "categoryId": 3,
    "recommended": true 
    ...
  }, ...],
  "productsCategories": [{
    "url": "vegeterian",
    "name": "Вегетарианские",
    "description": "More details ... ",
  }, ...],
  "recommendations": [2,5,7,11], // products ids, instead of 'recommended' flag if you prefer
  "actions": [{
    "url": "privedi_druga",
    "name": "Акция Приведи друга!",
    "description": "Детали акции ... ",
    "datePosted": "25.02.2020",
    ...
  }, ...],
  "orders": [],
  "sliderData": [{
    "url": "",
  }, ...],
  "infoPages": [{ // optional
    "url": "about",
    "name": "О нас",
    "content": "Информация ...",
  }, ...],
  ...
}
```

**~~*Viber API** - Отправлять сообщение cо всеми деталями заказа в viber - администратору магазина (вам) и человеку, сделавшему заказ.*~~

[~~*https://partners.viber.com/account/create-bot-account](https://partners.viber.com/account/create-bot-account)  - create bot
[https://developers.viber.com/docs/api/rest-bot-api/#authentication-token](https://developers.viber.com/docs/api/rest-bot-api/#authentication-token) - get token
[https://developers.viber.com/docs/api/rest-bot-api/#setting-a-webhook](https://developers.viber.com/docs/api/rest-bot-api/#setting-a-webhook) - setup a webhook
[https://developers.viber.com/docs/api/rest-bot-api/#send-message](https://developers.viber.com/docs/api/rest-bot-api/#send-message) - send message*~~

**[NEW]** При нажатии кнопки **заказать** отправлять **POST-запрос на ваш фейк-сервер** с данными заказа. После получения ответа от сервера на странице оформленного заказа брать id из ответа от сервера для переадресации на страницу оформленного заказа. В случае неудачного запроса (ошибки в ответе) - тоже как-то ее обрабатывать, выводить уведомление об ошибке пользователю.

Делать **валидацию** данных на корректность в форме заказа и выделять с помощью стилей. Должны быть обязательные для заполнения поля, и возможно опциональные. Обязательные:

- мобильный, email - для этих полей сделать проверку по паттерну, чтобы нельзя было отправить невалидный мобильный/email;
- данные пользователя (имя, фамилия, адрес);
- дата/время доставки, вариант оплаты.

Поля формы должны быть застилизированы и выглядеть одинаково во всех браузерах.
Все данные указанные при заказе должны быть отправлены в сообщении в Viber.
[[https://developer.mozilla.org/ru/docs/Learn/HTML/Forms/Валидация_формы](https://developer.mozilla.org/ru/docs/Learn/HTML/Forms/%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8F_%D1%84%D0%BE%D1%80%D0%BC%D1%8B)]

Хранить содержимое корзины в **LocalStorage**. Использовать лишь один ключ `cart` , в котором хранить только `productIds` и количество, **данные о продуктах** записывать туда **нельзя** (можно использовать объект `{<id>: <count>, ...}` для этих целей). Очищать корзину после оформления заказа.

Реализовать **анимацию** в виде `Loader`-компонента во всех блоках где будут загружаться данные с сервера с помощью AJAX. Во время загрузки данных отображать этот loader. Пример компонента: (также можете увидеть аналог на сайте dominos)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d40e9f3f-55ac-4f76-958b-ee260ffe9a76/giphy.gif](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d40e9f3f-55ac-4f76-958b-ee260ffe9a76/giphy.gif)

Сохраняется требование наличия **минимум 2х анимаций** (помимо loader, **любого типа**): для карточек товаров или других элементов (там, где это уместно).

При работе приложения в консоли не должно быть ошибок. Сайт должен одинаково стабильно работать во всех основных браузерах последних версий (Chrome, Edge, Firefox, Safari). 

Как обычно, ваша работа должна быть запушена на github и открываться через **Github pages**.

**Дополнительно: 2 балла -** за слайдер с акциями на главной странице (похожий как на главной странице Dominos), написанный на JavaScript (либо без JavaScript вообще - на CSS), без использования сторонних библиотек. Должен поддерживать разные разрешения экрана, в т.ч. и мобильный вид.

**1 балл** - за настройку подключения к viber и отправки мессаджей "админу" и "покупателю". Для этого нужно получить и сохранить userDetails при подписке на бота, а потом по запросу отправлять сообщения этому юзеру. 

[https://chatbotslife.com/build-viber-bot-with-nodejs-a21487e5b65](https://chatbotslife.com/build-viber-bot-with-nodejs-a21487e5b65)
[https://github.com/bvedad/viber-bot-sample](https://github.com/bvedad/viber-bot-sample)

[https://developers.viber.com/docs/api/nodejs-bot-api/](https://developers.viber.com/docs/api/nodejs-bot-api/)
